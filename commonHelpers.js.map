{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst dataTimePicker = document.getElementById('datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nconst dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\nlet countdownInterval;\n\nfunction toggleButton(state) {\n  startBtn.disabled = !state;\n\n  if (state) {\n    startBtn.classList.add('button-active');\n    startBtn.classList.remove('button-disabled');\n  } else {\n    startBtn.classList.remove('button-active');\n    startBtn.classList.add('button-disabled');\n  }\n}\n\ntoggleButton(false);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const currentDate = new Date();\n\n    if (selectedDates[0] > currentDate) {\n      userSelectedDate = selectedDates[0];\n      toggleButton(true);\n      iziToast.info({\n        message: 'You can start the countdown',\n        position: 'topRight',\n      });\n    } else {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      toggleButton(false);\n    }\n  },\n};\n\nflatpickr(dataTimePicker, options);\n\nstartBtn.addEventListener('click', function (event) {\n  event.preventDefault();\n  const now = new Date();\n\n  if (!userSelectedDate || userSelectedDate <= now) {\n    iziToast.error({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  toggleButton(false);\n  dataTimePicker.disabled = true;\n  if (countdownInterval) clearInterval(countdownInterval);\n  countdownInterval = setInterval(updateTimer, 1000);\n});\n\nfunction updateTimer() {\n  const timeDifference = userSelectedDate - new Date();\n  if (timeDifference > 0) {\n    const timeParts = convertMs(timeDifference);\n    dataDays.textContent = addLeadingZero(timeParts.days);\n    dataHours.textContent = addLeadingZero(timeParts.hours);\n    dataMinutes.textContent = addLeadingZero(timeParts.minutes);\n    dataSeconds.textContent = addLeadingZero(timeParts.seconds);\n  } else {\n    clearInterval(countdownInterval);\n    iziToast.info({\n      message: 'The countdown has ended',\n      position: 'topRight',\n    });\n    toggleButton(false);\n    dataTimePicker.disabled = false;\n  }\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor((ms % hour) / minute);\n  const seconds = Math.floor((ms % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}"],"names":["dataTimePicker","startBtn","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","countdownInterval","toggleButton","state","options","selectedDates","currentDate","iziToast","flatpickr","event","updateTimer","timeDifference","timeParts","convertMs","addLeadingZero","ms","days","hours","minutes","seconds","value"],"mappings":"+IAKA,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EACAC,EAEJ,SAASC,EAAaC,EAAO,CAC3BR,EAAS,SAAW,CAACQ,EAEjBA,GACFR,EAAS,UAAU,IAAI,eAAe,EACtCA,EAAS,UAAU,OAAO,iBAAiB,IAE3CA,EAAS,UAAU,OAAO,eAAe,EACzCA,EAAS,UAAU,IAAI,iBAAiB,EAE5C,CAEAO,EAAa,EAAK,EAElB,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAc,IAAI,KAEpBD,EAAc,CAAC,EAAIC,GACrBN,EAAmBK,EAAc,CAAC,EAClCH,EAAa,EAAI,EACjBK,EAAS,KAAK,CACZ,QAAS,8BACT,SAAU,UAClB,CAAO,IAEDA,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAClB,CAAO,EACDL,EAAa,EAAK,EAErB,CACH,EAEAM,EAAUd,EAAgBU,CAAO,EAEjCT,EAAS,iBAAiB,QAAS,SAAUc,EAAO,CAIlD,GAHAA,EAAM,eAAc,EAGhB,CAACT,GAAoBA,GAFb,IAAI,KAEkC,CAChDO,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDL,EAAa,EAAK,EAClBR,EAAe,SAAW,GACtBO,GAAmB,cAAcA,CAAiB,EACtDA,EAAoB,YAAYS,EAAa,GAAI,CACnD,CAAC,EAED,SAASA,GAAc,CACrB,MAAMC,EAAiBX,EAAmB,IAAI,KAC9C,GAAIW,EAAiB,EAAG,CACtB,MAAMC,EAAYC,EAAUF,CAAc,EAC1Cf,EAAS,YAAckB,EAAeF,EAAU,IAAI,EACpDf,EAAU,YAAciB,EAAeF,EAAU,KAAK,EACtDd,EAAY,YAAcgB,EAAeF,EAAU,OAAO,EAC1Db,EAAY,YAAce,EAAeF,EAAU,OAAO,CAC9D,MACI,cAAcX,CAAiB,EAC/BM,EAAS,KAAK,CACZ,QAAS,0BACT,SAAU,UAChB,CAAK,EACDL,EAAa,EAAK,EAClBR,EAAe,SAAW,EAE9B,CAEA,SAASmB,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAOH,EAAK,KAAQ,GAAM,EACzCI,EAAU,KAAK,MAAOJ,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAeM,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}